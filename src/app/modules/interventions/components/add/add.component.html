<div class="m-subheader" appunwraptag="">
  <div class="d-flex align-items-center">
    <div class="siam-page-header">
      <a class="siam-header-back-btn" href="/index"><i class="fa fa-angle-left"></i> Tableau de bord</a>
      <h2>Nouvelle intervention</h2>
    </div>
  </div>
</div>
<div class="m-content">
  <div class="m-portlet m-portlet--bordered-semi m-portlet--full-height m-portlet--rounded ">
    <div class="m-portlet__body">

      <form>
        <dx-form id="form"
                 [formData]="interventions"
                 [readOnly]="false"
                 [showColonAfterLabel]="true"
                 [showValidationSummary]="true"
                 labelLocation="top">

          <dxi-item itemType="group" caption="Informations Générales" [colCount]="2" i18n-caption>


          <dxi-item dataField="cin" editorType="dxTextBox">
            <dxo-label
              text="CIN">
            </dxo-label>
          </dxi-item>


          <dxi-item dataField="cin" editorType="dxTextBox">
            <dxo-label
              text="Nom complet">
            </dxo-label>
          </dxi-item>


          <dxi-item dataField="cin" editorType="dxTextBox">
            <dxo-label
              text="N Téléphone">
            </dxo-label>
          </dxi-item>



          <dxi-item dataField="commande" editorType="dxSelectBox" [editorOptions]="commandeOptions">
            <dxo-label
              text="Parcelle" i18n-text>
            </dxo-label>
          </dxi-item>

            <dxi-item dataField="cin" editorType="dxNumberBox">
              <dxo-label
                text="Superficie contractée">
              </dxo-label>
            </dxi-item>


            <dxi-item dataField="cin" editorType="dxNumberBox">
            <dxo-label
              text="Superficie réelle">
            </dxo-label>
          </dxi-item>


          <dxi-item dataField="cin" editorType="dxNumberBox">
            <dxo-label
              text="Superficie restante">
            </dxo-label>
          </dxi-item>


          <dxi-item>
            <dxo-label
              text="Date prévue" >
            </dxo-label>
            <dx-date-box style="width: 100%"
              type="date">
            </dx-date-box>
          </dxi-item>



          <dxi-item dataField="cin" editorType="dxNumberBox">
            <dxo-label
              text="Superficie a travailler">
            </dxo-label>
          </dxi-item>



            <dxi-item dataField="commande" editorType="dxSelectBox" [editorOptions]="commandeOptions">
              <dxo-label
                text="Proposition" i18n-text>
              </dxo-label>
            </dxi-item>


            <dxi-item dataField="commande" editorType="dxSelectBox" [editorOptions]="commandeOptions">
              <dxo-label
                text="Centre distribution" i18n-text>
              </dxo-label>
            </dxi-item>


          <dxi-item dataField="cin" editorType="dxTextArea">
            <dxo-label
              text="Description">
            </dxo-label>
          </dxi-item>

          </dxi-item>



          <dxi-item itemType="group" [colCount]="5" caption="Choix de la semance" i18n-caption>



            <dxi-item dataField="semance_famille" editorType="dxSelectBox" [editorOptions]="familleOptions">
              <dxo-label
                text="Famille" i18n-text>
              </dxo-label>
              <dxi-validation-rule type="required" message="Famille est obligatoire"
                                   i18n-message></dxi-validation-rule>
            </dxi-item>

            <dxi-item dataField="semance_sub_famille"  editorType="dxSelectBox" [editorOptions]="subFamilleOptions">
              <dxo-label
                text="Sous Famille" i18n-text>
              </dxo-label>
              <dxi-validation-rule type="required" message="Sous Famille est obligatoire"
                                   i18n-message></dxi-validation-rule>
            </dxi-item>

            <dxi-item dataField="semance_article" editorType="dxSelectBox" [editorOptions]="articleOptions">
              <dxo-label
                text="Article" i18n-text>
              </dxo-label>
              <dxi-validation-rule type="required" message="Article est obligatoire"
                                   i18n-message></dxi-validation-rule>
            </dxi-item>
            <dxi-item dataField="semance_quantity" editorType="dxNumberBox">
              <dxo-label
                text="Quantity">
              </dxo-label>
            </dxi-item>

            <dxi-item
              itemType="button"
              alignment="left"
              [buttonOptions]="addSemance">
            </dxi-item>

            <dxi-item [colSpan]="5">
              <dx-data-grid id="CampaignGridContainer1"
                            [allowColumnReordering]="true"
                            [dataSource]="semances"
                            [showColumnLines]="true"
                            [showRowLines]="true"
                            [showBorders]="true"
                            [rowAlternationEnabled]="true"
                            style="padding-top: 2vh"
                            [columnAutoWidth]="true"
                            [noDataText]="'Aucan article n\'est ajouter!'">
                <dxi-column dataField="famille_id" caption="Famille"></dxi-column>
                <dxi-column dataField="sub_famille_id" caption="Sous famille"></dxi-column>
                <dxi-column dataField="article_id" caption="Article"></dxi-column>
                <dxi-column dataField="quantity1" caption="Quantité globale"></dxi-column>
                <dxo-scrolling [showScrollbar]="'always'"></dxo-scrolling>
                <dxo-remote-operations
                  [sorting]="true"
                  [paging]="false">
                </dxo-remote-operations>
                <dxo-selection mode="none"></dxo-selection>
                <dxo-editing
                  [useIcons]="true"
                  mode="row"
                  [allowUpdating]="false"
                  [allowDeleting]="true"
                  [allowAdding]="false">
                </dxo-editing>
                <dxo-pager
                  [showPageSizeSelector]="false"
                ></dxo-pager>
              </dx-data-grid>
            </dxi-item>

          </dxi-item>





          <dxi-item itemType="group" [colCount]="5" caption="Choix des produits" i18n-caption>



            <dxi-item dataField="prod_famille" editorType="dxSelectBox" [editorOptions]="familleOptions">
              <dxo-label
                text="Famille" i18n-text>
              </dxo-label>
              <dxi-validation-rule type="required" message="Famille est obligatoire"
                                   i18n-message></dxi-validation-rule>
            </dxi-item>
            <dxi-item dataField="prod_sub_famille" editorType="dxSelectBox" [editorOptions]="subFamilleOptions">
              <dxo-label
                text="Sous Famille" i18n-text>
              </dxo-label>
              <dxi-validation-rule type="required" message="Sous Famille est obligatoire"
                                   i18n-message></dxi-validation-rule>
            </dxi-item>

            <dxi-item dataField="prod_article" editorType="dxSelectBox" [editorOptions]="articleOptions">
              <dxo-label
                text="Article" i18n-text>
              </dxo-label>
              <dxi-validation-rule type="required" message="Article est obligatoire"
                                   i18n-message></dxi-validation-rule>
            </dxi-item>
            <dxi-item dataField="prod_quantity" editorType="dxNumberBox">
              <dxo-label
                text="Quantity">
              </dxo-label>
            </dxi-item>

            <dxi-item
              itemType="button"
              alignment="left"
              [buttonOptions]="addProduct">
            </dxi-item>


            <dxi-item [colSpan]="5" >

            <dx-data-grid id="CampaignGridContainer"
                          [allowColumnReordering]="true"
                          [dataSource]="products"
                          [showColumnLines]="true"
                          [showRowLines]="true"
                          [showBorders]="true"
                          [rowAlternationEnabled]="true"
                          style="padding-top: 2vh"
                          [columnAutoWidth]="true"
                          [noDataText]="'Aucan article n\'est ajouter!'">
              <dxi-column dataField="famille_id" caption="Famille"></dxi-column>
              <dxi-column dataField="sub_famille_id" caption="Sous famille"></dxi-column>
              <dxi-column dataField="article_id" caption="Article"></dxi-column>
              <dxi-column dataField="quantity1" caption="Quantité globale"></dxi-column>
              <dxo-scrolling [showScrollbar]="'always'"></dxo-scrolling>
              <dxo-remote-operations
                [sorting]="true"
                [paging]="false">
              </dxo-remote-operations>
              <dxo-selection mode="none"></dxo-selection>
              <dxo-editing
                [useIcons]="true"
                mode="row"
                [allowUpdating]="false"
                [allowDeleting]="true"
                [allowAdding]="false">
              </dxo-editing>
              <dxo-pager
                [showPageSizeSelector]="false"
              ></dxo-pager>
            </dx-data-grid>
            </dxi-item>


          </dxi-item>



          <dxi-item itemType="group" caption="Choix des préstations de service">




            <div *ngFor="let option of prestations_service">

              <dx-check-box
                [value]="option.value"
                [width]="200"
                [text]="option.name"
              ></dx-check-box>

            </div>

          </dxi-item>



          <div class="dx-fieldset">
            <div class="dx-field">
              <div class="dx-field-value">
                <dxi-item  itemType="button"  [buttonOptions]="buttonsave"></dxi-item>
                <dxi-item  itemType="button"  [buttonOptions]="buttonValider"></dxi-item>
                <dxi-item  itemType="button"  [buttonOptions]="buttoncancel"></dxi-item>&nbsp;
              </div>
            </div>
          </div>



        </dx-form>
      </form>
    </div>
  </div>
</div>
