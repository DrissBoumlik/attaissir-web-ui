<div class="m-subheader" appunwraptag="">
  <div class="d-flex align-items-center">
    <div class="mr-auto">
      <h3 class="m-subheader__title" i18n>
        LIST DES CONTRATS
      </h3>
    </div>
    <div>
      <div class="m-dropdown m-dropdown--inline m-dropdown--arrow m-dropdown--align-right m-dropdown--align-push"
           m-dropdown-toggle="hover" aria-expanded="true">
        <a href="#"
           class="m-portlet__nav-link btn btn-lg btn-secondary  m-btn m-btn--outline-2x m-btn--air m-btn--icon m-btn--icon-only m-btn--pill  m-dropdown__toggle">
          <i class="la la-plus m--hide"></i>
          <i class="la la-ellipsis-h"></i>
        </a>
        <div class="m-dropdown__wrapper">
          <span class="m-dropdown__arrow m-dropdown__arrow--right m-dropdown__arrow--adjust"></span>
          <div class="m-dropdown__inner">
            <div class="m-dropdown__body">
              <div class="m-dropdown__content">
                <ul class="m-nav">
                  <li class="m-nav__section m-nav__section--first m--hide">
										<span class="m-nav__section-text">
											Quick Actions
										</span>
                  </li>
                  <li class="m-nav__item">
                    <a href="" class="m-nav__link">
                      <i class="m-nav__link-icon flaticon-share"></i>
                      <span class="m-nav__link-text">
												Activity
											</span>
                    </a>
                  </li>
                  <li class="m-nav__item">
                    <a href="" class="m-nav__link">
                      <i class="m-nav__link-icon flaticon-chat-1"></i>
                      <span class="m-nav__link-text">
												Messages
											</span>
                    </a>
                  </li>
                  <li class="m-nav__item">
                    <a href="" class="m-nav__link">
                      <i class="m-nav__link-icon flaticon-info"></i>
                      <span class="m-nav__link-text">
												FAQ
											</span>
                    </a>
                  </li>
                  <li class="m-nav__item">
                    <a href="" class="m-nav__link">
                      <i class="m-nav__link-icon flaticon-lifebuoy"></i>
                      <span class="m-nav__link-text">
												Support
											</span>
                    </a>
                  </li>
                  <li class="m-nav__separator m-nav__separator--fit"></li>
                  <li class="m-nav__item">
                    <a href="#" class="btn btn-outline-danger m-btn m-btn--pill m-btn--wide btn-sm">
                      Submit
                    </a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="m-content">

  <dx-data-grid
    (onEditStart)="onEditcontrat($event)"
    [dataSource]="contracts"
    [columnHidingEnabled]="true"
    [allowColumnReordering]="true"
    [remoteOperations]="true"
    height="600"
    showBorders="true"
    [masterDetail]="{ enabled: true, template: 'detail' }">

    <dxo-filter-row [visible]="true"></dxo-filter-row>
    <dxo-header-filter [visible]="true"></dxo-header-filter>
    <dxo-group-panel [visible]="true"></dxo-group-panel>
    <dxo-scrolling mode="virtual"></dxo-scrolling>
    <dxo-editing
      mode="row"
      [allowAdding]="true"
      [allowUpdating]="true"
      [allowDeleting]="true">
    </dxo-editing>
    <dxo-grouping [autoExpandAll]="false"></dxo-grouping>

    <dxi-column dataField="id" caption="Id Contrat">
    </dxi-column>
    <dxi-column dataField="date_de_signature" caption="Date de signature" dataType="date">
    </dxi-column>
    <dxi-column dataField="date_de_debut" caption="Date de début" dataType="date">
    </dxi-column>
    <dxi-column dataField="duree_de_contrat" caption="durée de contrat" dataType="Text"></dxi-column>
    <dxi-column dataField="campagne" caption="Campagne">
    </dxi-column>
    <dxi-column dataField="tiers.first_name" caption="Agrégé" datatype="Text">
    </dxi-column>
    <dxi-column dataField="structure.libelle" caption="Structure" dataType="Text">
    </dxi-column>

    <div *dxTemplate="let contract of contracts">
      <dx-data-grid
        [dataSource]="contract.tiers.types"
        showBorders="true">
        <dxi-column dataField="id" caption="Id Contrat">
        </dxi-column>
      </dx-data-grid>
    </div>
  </dx-data-grid>

</div>
